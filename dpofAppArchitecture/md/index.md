## TL;DR アプリケーションアーキテクチャ設計パターン

<a href="https://twitter.com/kasecato" target="_blank"><img style="border-radius: 50% !important;" src="img/twitter.jpg" width="200px" alt="Keisuke KATO"></a>

20xx/xx/xx <a href="https://twitter.com/kasecato" target="_blank">@kasecato</a>



## About me
```js
const addTimeline2017 = (profile) => {
    profile.timeline.push({
        year: 2017,
        lang: "Java 9",
        company: "Nulab",
        team: "Nulab Apps"
    })
}
```



## [アプリケーションアーキテクチャ設計パターン](http://gihyo.jp/book/2017/978-4-7741-9303-8)
* 斉藤 賢哉（さいとう けんや） 著
    * Desing Patterns of Application Architecture
    * 『マスタリングJavaEE5』 著者
    * 三菱UFJインフォメーションテクノロジー株式会社
    * 2017/10/12
    * ¥3,780 💸



## アプリケーションアーキテクチャ設計パターンに期待したもの
* アプリ デザイン パターンのベスト プラクティス
* アプリ デザイン パターンのアンチパターン



## アプリケーションアーキテクチャ設計パターンの実際
* 体系的
* 実践的
* 読みやすい (訳書ではなく日本語)
* 素晴らしい



## 僕が欲しかったアプリケーションアーキテクチャ設計パターンのまとめを作った



## アーキテクチャ
* 非機能要件
    * アベイラビリティ (可用性)
    * リライアビリティ (信頼性)
    * スケーラビリティ (拡張性)
    * パフォーマンス (性能)
    * セキュリティ (気密性)
    * サービサビリティ (運用性)



## 同期・非同期
* 非同期
    * ポーリング方式
    * コールバック方式
* 逐次，並列，並行
    * 並列: 複数のタスクを同時に処理
    * 並行: 一つのタスクを分割可能な単位で処理



## 処理形態
* オンライン処理
    * 同期型オンライン処理
    * 非同期型/ディレード オンライン処理
        * スレッド
        * メッセージ キューイング方式
* バッチ処理
    * オフライン バッチ
    * オンライン バッチ



## アプリ レイヤ
* ↓（上位）プレゼンテーション層
    * 認証
    * セッション管理
    * バリデーション
* ↓（中位）ビジネス層
    * ビジネス ルール
* ↓（下位）インテグレーション層
    * RDB
    * アプリケーション連携
    * MOM (Messeage Oriented Middleware)



## アプリ レイヤ
* ↓（上位）プレゼンテーション層
* ↓（中位）ビジネス層
* ↓（下位）インテグレーション層
    * 下位からの上位依存は御法度
    * 直下のレイヤのみに依存させる
    * 各レイヤを入替えても他のレイヤに影響しない




## サーバサイド デザイン パターン
* プレゼンテーション層
    * セッション管理
        * スティッキー セッション方式
            * セッション ID で固定ラウンドロビン
        * セッション レプリケーション方式
            * サーバ ダウンでセッションを AP サーバに振り分け
        * データベース セッション方式
            * サーバ ダウンで DB 格納されたセッションを AP サーバが復元
    * ページ連携
        * ディスパッチ方式
            * フォワード
            * インクルード
        * リダイレクト方式



## サーバサイド デザイン パターン
* プレゼンテーション層
    * View Helper パターン
        * バックエンドで条件計算しフロントは出力だけ
    * MVC 2
        * Model
            * Domain Model パターン
                * 状態を持つ
            * Transaction Script パターン
                * 状態を持たない



## サーバサイド デザイン パターン
* プレゼンテーション層
    * MVC 2
        * アクション ベース
            * Spring, Struts
            * フロントが自由
        * コンポーネント ベース
            * JSF, Wicket
            * フロントがパーツ



## サーバサイド デザイン パターン
* プレゼンテーション層
    * 画面遷移
        * POST-REDIRECT-GET (PRG)
            * 更新系の二重送信防止
            * ブックマーカブル
    * 認証・認可
    
* インスタンス生成・構造
    * DI
    * AOP
    * Observer パターン
    * Plugin Factory パターン



## まとめ



## 参考ノート
1. 技術評論社,「アプリケーションアーキテクチャ設計パターン」, http://gihyo.jp/book/2017/978-4-7741-9303-8
